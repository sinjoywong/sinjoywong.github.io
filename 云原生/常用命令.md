```shell
[root@localhost k8s_demo]# docker tag tlinux2.4-minimal/test tlinux2.4-minimal/test:v1
[root@localhost k8s_demo]# docker images
REPOSITORY         TAG            IMAGE ID            CREATED          SIZE
tlinux2.4-minimal/test   latest   8022f25517c8        6 minutes ago       271 MB
tlinux2.4-minimal/test   v1       8022f25517c8        6 minutes ago       271 MB


[root@localhost k8s_demo]# docker save -o tlinux2.4-minimal-test-v1.tar tlinux2.4-minimal/test:v1


[root@localhost k8s_demo]# tar -zcvf tlinux2.4-minimal-test-v1.tar.gz tlinux2.4-minimal-test-v1.tar
tlinux2.4-minimal-test-v1.tar
[root@localhost k8s_demo]# ls -lhrt
总用量 349M
-rw-r--r-- 1 root root  106 7月  15 07:36 Dockerfile
-rwxr-xr-x 1 root root   34 7月  15 07:37 test.sh
-rw------- 1 root root 267M 7月  15 07:47 tlinux2.4-minimal-test-v1.tar
-rw-r--r-- 1 root root  82M 7月  15 07:47 tlinux2.4-minimal-test-v1.tar.gz

[root@localhost k8s_demo]# docker load -i tlinux2.4-minimal-test-v1.tar

docker tag k8s-csp:v2  registry.tce.woa.com/k8s-csp:v2
docker push registry.tce.woa.com/k8s-csp:v2
```





```shell
#Dockerfile
FROM mirrors.tencent.com/tlinux/tlinux2.4-minimal

COPY test.sh /data/install/
RUN /data/install/test.sh


#若test.pod.yaml写成这样，没有挂载持久卷：
#apiVersion: "apps/v1beta1"
apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  name: "tlinux2.4-minimal-test"
spec:
  replicas: 1
  template:
    metadata:
      labels:
        module: "csp"
        app: "tlinux2.4-minimal-test"
    spec:
      containers:
      - name: "csp-controller"
        image: "tlinux2.4-minimal/test:v1"
        command: ["/bin/bash", "-ce", "tail -f /dev/null"]
        
# 在拉起pod后，
kubectl apply -f test.pod.yaml

#在其中的/data/install下，会有镜像已有的/data/install目录和COPY进去的test.sh，但如果进入pod中创建一个文件，删掉pod，之后这个修改就会丢失，而不会持久化。
```

